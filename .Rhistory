number_of_socks <- rep(NA, iter)
for(draw in 1:iter) {
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(m[draw, c(1:(i+1))])) {i <- i + 1}
#add
number_of_socks[draw] <- i + 1 #add one as we count the first draw as well
}
mean_number_of_socks[j] <- mean(number_of_socks)
}
j
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(Rfast)
#here are my socks
socks <- rep(LETTERS[1:10], 2)
#set up iteration
set.seed(1)
iter <- 1e4
number_of_socks <- rep(NA, iter)
for(draw in 1:iter) {
# do all possible draws of socks
sock_samples <- sample(socks, length(socks))
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(sock_samples[1:(i+1)])) {i <- i + 1}
#add
number_of_socks[draw] <- i + 1 #add one as we count the first draw as well
}
#show
summary(number_of_socks)
qplot(as.factor(number_of_socks)) +
labs(title = "Number of socks before I find a matching pair",
x = "Number of socks",
y = "Frequency")
number_of_pairs <- 10:1000
mean_number_of_socks <- rep(NA, length(number_of_pairs))
for(j in seq_along(number_of_pairs)) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
set.seed(1)
iter <- 10 #to prevent from running too long we will take a smaller sample and draw a trend line
m <- matrix(replicate(n = iter, expr = sample(socks, length(socks))),
nrow = iter,
ncol = length(socks),
byrow = TRUE)
number_of_socks <- rep(NA, iter)
for(draw in 1:iter) {
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(m[draw, c(1:(i+1))])) {i <- i + 1}
#add
number_of_socks[draw] <- i + 1 #add one as we count the first draw as well
}
mean_number_of_socks[j] <- mean(number_of_socks)
}
qplot(number_of_pairs, mean_number_of_socks) +
geom_smooth(se = FALSE) +
labs(title = "The effect of increasing number of pairs",
x = "Number of pairs",
y = "Number of socks until I have a match")
rmarkdown::render(input = "./scr/week52_2019.Rmd",
output_format = "html_document",
output_file = "week52_2019.html",
output_dir = "./docs/")
number_of_pairs <- 10:1000
mean_number_of_socks <- rep(NA, length(number_of_pairs))
sapply(seq_along(number_of_pairs), function(j) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
set.seed(1)
iter <- 10 #to prevent from running too long we will take a smaller sample and draw a trend line
m <- matrix(replicate(n = iter, expr = sample(socks, length(socks))),
nrow = iter,
ncol = length(socks),
byrow = TRUE)
number_of_socks <- rep(NA, iter)
for(draw in 1:iter) {
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(m[draw, c(1:(i+1))])) {i <- i + 1}
#add
number_of_socks[draw] <- i + 1 #add one as we count the first draw as well
}
mean_number_of_socks[j] <- mean(number_of_socks)
})
microbenchmark( forloop = {vec <- numeric(1000) for (i in 1:length(vec)) { vec[i] <- i * 2 }}, sapply = sapply(1:1000, function(x) x * 2) )
number_of_pairs <- 10:1000
mean_number_of_socks <- rep(NA, length(number_of_pairs))
sapply(seq_along(number_of_pairs), function(j) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
set.seed(1)
iter <- 10 #to prevent from running too long we will take a smaller sample and draw a trend line
m <- matrix(replicate(n = iter, expr = sample(socks, length(socks))),
nrow = iter,
ncol = length(socks),
byrow = TRUE)
number_of_socks <- rep(NA, iter)
for(draw in 1:iter) {
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(m[draw, c(1:(i+1))])) {i <- i + 1}
#add
number_of_socks[draw] <- i + 1 #add one as we count the first draw as well
}
mean_number_of_socks[j] <- mean(number_of_socks)
})
qplot(number_of_pairs, mean_number_of_socks) +
geom_smooth(se = FALSE) +
labs(title = "The effect of increasing number of pairs",
x = "Number of pairs",
y = "Number of socks until I have a match")
?match
m
m <- matrix(replicate(n = iter, expr = sample(socks, length(socks))),
nrow = iter,
ncol = length(socks),
byrow = TRUE)
head(m)
j
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
set.seed(1)
iter <- 150 #to prevent from running too long we will take a smaller sample and draw a
m <- matrix(replicate(n = iter, expr = sample(socks, length(socks))),
nrow = iter,
ncol = length(socks),
byrow = TRUE)
m
rowsum(m[1, ])
m[1, ]
find_sock_pair <- function() {
# do all possible draws of socks
sock_samples <- sample(socks, length(socks))
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(sock_samples[1:(i+1)])) {i <- i + 1}
return(i + 1)
}
#here are my socks
socks <- rep(LETTERS[1:10], 2)
#set up iteration
set.seed(1)
iter <- 1e4
number_of_socks <- rep(NA, iter)
find_sock_pair <- function() {
# do all possible draws of socks
sock_samples <- sample(socks, length(socks))
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(sock_samples[1:(i+1)])) {i <- i + 1}
return(i + 1)
}
find_sock_pair()
find_sock_pair()
find_sock_pair()
find_sock_pair_c <- compiler::cmpfun(find_sock_pair)
#here are my socks
socks <- rep(LETTERS[1:10], 2)
#set up iteration
set.seed(1)
iter <- 1e5
number_of_socks <- rep(NA, iter)
find_sock_pair <- function() {
# do all possible draws of socks
sock_samples <- sample(socks, length(socks))
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(sock_samples[1:(i+1)])) {i <- i + 1}
return(i + 1)
}
find_sock_pair_c <- compiler::cmpfun(find_sock_pair)
for(draw in 1:iter) {
#add
number_of_socks[draw] <- find_sock_pair_c() #add one as we count the first draw as well
}
#show
summary(number_of_socks)
qplot(as.factor(number_of_socks)) +
labs(title = "Number of socks before I find a matching pair",
x = "Number of socks",
y = "Frequency")
number_of_pairs <- 10:1000
mean_number_of_socks <- rep(NA, length(number_of_pairs))
for(j in seq_along(number_of_pairs)) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
set.seed(1)
iter <- 150 #to prevent from running too long we will take a smaller sample and draw a trend line
number_of_socks <- rep(NA, iter)
for(draw in 1:iter) {
#add
number_of_socks[draw] <- find_sock_pair_c() #add one as we count the first draw as well
}
mean_number_of_socks[j] <- mean(number_of_socks)
}
number_of_socks <- rep(list(rep(NA, iter), length(number_of_pairs)))
number_of_socks
list(rep(NA, iter)
)
number_of_socks <- rep(list(rep(NA, iter)), length(number_of_pairs))
number_of_socks
dim(list(rep(NA, iter))
dim(number_of_socks)
length(number_of_socks)
length(number_of_pairs)
number_of_pairs <- 10:1000
mean_number_of_socks <- rep(NA, length(number_of_pairs))
number_of_socks <- rep(list(rep(NA, iter)), length(number_of_pairs))
for(j in seq_along(number_of_pairs)) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
set.seed(1)
iter <- 150 #to prevent from running too long we will take a smaller sample and draw a trend line
for(draw in 1:iter) {
#add
number_of_socks[[j]][draw] <- find_sock_pair_c() #add one as we count the first draw as well
}
mean_number_of_socks[j] <- mean(number_of_socks)
}
number_of_pairs <- 10:1000
mean_number_of_socks <- rep(NA, length(number_of_pairs))
number_of_socks <- rep(list(rep(NA, iter)), length(number_of_pairs))
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
set.seed(1)
iter <- 150 #to prevent from running too long we will take a smaller sample and draw a trend line
j
number_of_socks[[j]]
number_of_socks[[j]][draw]
find_sock_pair_c()
socks
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
iter <- 150 #to prevent from running too long we will take a smaller sample and draw a trend line
j <- 10
j <- 1
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
iter <- 150 #to prevent from running too long we will take a smaller sample and draw a trend line
find_sock_pair_c()
number_of_socks[[j]][draw]
#add
number_of_socks[[j]][draw] <- find_sock_pair_c() #add one as we count the first draw as well
number_of_pairs <- 10:1000
mean_number_of_socks <- rep(NA, length(number_of_pairs))
number_of_socks <- rep(list(rep(NA, iter)), length(number_of_pairs))
for(j in seq_along(number_of_pairs)) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
iter <- 150 #to prevent from running too long we will take a smaller sample and draw a trend line
for(draw in 1:iter) {
#add
number_of_socks[[j]][draw] <- find_sock_pair_c() #add one as we count the first draw as well
}
mean_number_of_socks[j] <- mean(number_of_socks[[j]])
}
j
#set up iteration
set.seed(1)
iter <- 1e5
number_of_socks <- rep(NA, iter)
microbenchmark::microbenchmark(find_sock_pair(), find_sock_pair_c(), times = 100)
#here are my socks
socks <- rep(LETTERS[1:10], 2)
#set up iteration
set.seed(1)
iter <- 1e5
number_of_socks <- rep(NA, iter)
find_sock_pair <- function() {
# do all possible draws of socks
sock_samples <- sample(socks, length(socks))
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(sock_samples[1:(i+1)])) {i <- i + 1}
return(i + 1)
}
for(draw in 1:iter) {
#add
number_of_socks[draw] <- find_sock_pair() #add one as we count the first draw as well
}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(Rfast)
#here are my socks
socks <- rep(LETTERS[1:10], 2)
#set up iteration
set.seed(1)
iter <- 1e4
number_of_socks <- rep(NA, iter)
find_sock_pair <- function() {
# do all possible draws of socks
sock_samples <- sample(socks, length(socks))
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(sock_samples[1:(i+1)])) {i <- i + 1}
return(i + 1)
}
for(draw in 1:iter) {
#add
number_of_socks[draw] <- find_sock_pair() #add one as we count the first draw as well
}
#show
summary(number_of_socks)
qplot(as.factor(number_of_socks)) +
labs(title = "Number of socks before I find a matching pair",
x = "Number of socks",
y = "Frequency")
rmarkdown::render(input = "./scr/week52_2019.Rmd",
output_format = "html_document",
output_file = "week52_2019.html",
output_dir = "./docs/")
library(profvis)
install.packages("profvis")
# set up objects for iteration
number_of_pairs <- 10:1000
mean_number_of_socks <- rep(NA, length(number_of_pairs))
number_of_socks <- rep(list(rep(NA, iter)), length(number_of_pairs))
library(profvis)
profvis({
for(j in seq_along(number_of_pairs)) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
iter <- 10 #to prevent from running too long we will take a smaller sample and draw a trend line
for(draw in 1:iter) {
#add
number_of_socks[[j]][draw] <- find_sock_pair() ##find number of socks
}
mean_number_of_socks[j] <- mean(number_of_socks[[j]])
}
})
profvis({find_sock_pair()})
profvis({sapply(1:100,find_sock_pair())})
#set up iteration
set.seed(1)
iter <- 1e4
number_of_socks <- rep(NA, iter)
profvis({sapply(1:100,find_sock_pair())})
sapply(1:100,find_sock_pair())
sapply(1:100,find_sock_pair())
find_sock_pair()
sapply(1:100,find_sock_pair
sapply(1:100,find_sock_pair)
#here are my socks
socks <- rep(LETTERS[1:10], 2)
#set up iteration
set.seed(1)
iter <- 1e4
number_of_socks <- rep(NA, iter)
find_sock_pair <- function() {
# do all possible draws of socks
sock_samples <- sample(socks, length(socks))
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(sock_samples[1:(i+1)])) {i <- i + 1}
return(i + 1)
}
profvis({
for(draw in 1:iter) {
#add number of draws for each iteration
# number_of_socks[draw] <- find_sock_pair() #add one as we count the first draw as well
# do all possible draws of socks
sock_samples <- sample(socks, length(socks))
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(sock_samples[1:(i+1)])) {i <- i + 1}
number_of_socks[draw] <- i + 1 #add one as we count the first draw as well
}
})
#here are my socks
socks <- rep(LETTERS[1:10], 2)
#set up iteration
set.seed(1)
iter <- 1e4
number_of_socks <- rep(NA, iter)
#create a function that will count number of
find_sock_pair <- function() {
# do all possible draws of socks
sock_samples <- sample(socks, length(socks))
#initial draw of a sock
i <- 1
#check until we have at least 2 socks
while(!2 %in% Rfast::Table(sock_samples[1:(i+1)])) {i <- i + 1}
return(i + 1)
}
for(draw in 1:iter) {
#add number of draws for each iteration
number_of_socks[draw] <- find_sock_pair() #add one as we count the first draw as well
}
#show
summary(number_of_socks)
qplot(as.factor(number_of_socks)) +
labs(title = "Number of socks before I find a matching pair",
x = "Number of socks",
y = "Frequency")
rmarkdown::render(input = "./scr/week52_2019.Rmd",
output_format = "html_document",
output_file = "week52_2019.html",
output_dir = "./docs/")
# set up objects for iteration
number_of_pairs <- 10:500
mean_number_of_socks <- rep(NA, length(number_of_pairs))
number_of_socks <- rep(list(rep(NA, iter)), length(number_of_pairs))
for(j in seq_along(number_of_pairs)) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
#set up iteration
iter <- 10 #to prevent from running too long we will take a smaller sample and draw a trend line
for(draw in 1:iter) {
#add
number_of_socks[[j]][draw] <- find_sock_pair() ##find number of socks
}
mean_number_of_socks[j] <- mean(number_of_socks[[j]])
}
# plot
qplot(number_of_pairs, mean_number_of_socks) +
geom_smooth(se = FALSE) +
labs(title = "The effect of increasing number of pairs",
x = "Number of pairs",
y = "Number of socks until I have a match")
mean_number_of_socks
mean(number_of_socks[[j]])
number_of_socks[[j]]
# set up objects for iteration
iter <- 10 #to prevent from running too long we will take a smaller sample and draw a trend line
number_of_pairs <- 10:500
mean_number_of_socks <- rep(NA, length(number_of_pairs))
number_of_socks <- rep(list(rep(NA, iter)), length(number_of_pairs))
for(j in seq_along(number_of_pairs)) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
for(draw in 1:iter) {
#add
number_of_socks[[j]][draw] <- find_sock_pair() ##find number of socks
}
mean_number_of_socks[j] <- mean(number_of_socks[[j]])
}
# plot
qplot(number_of_pairs, mean_number_of_socks) +
geom_smooth(se = FALSE) +
labs(title = "The effect of increasing number of pairs",
x = "Number of pairs",
y = "Number of socks until I have a match")
number_of_pairs <- seq(10, 1000, by = 10)
number_of_pairs <- seq(10, 1000, by = 5)
length(number_of_pairs)
# set up objects for iteration
iter <- 200 #to prevent from running too long we will take a smaller sample and draw a trend line
number_of_pairs <- seq(10, 1000, by = 5)
mean_number_of_socks <- rep(NA, length(number_of_pairs))
number_of_socks <- rep(list(rep(NA, iter)), length(number_of_pairs))
for(j in seq_along(number_of_pairs)) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
for(draw in 1:iter) {
#add
number_of_socks[[j]][draw] <- find_sock_pair() ##find number of socks
}
mean_number_of_socks[j] <- mean(number_of_socks[[j]])
}
# set up objects for iteration
iter <- 10 #to prevent from running too long we will take a smaller sample and draw a trend line
number_of_pairs <- seq(10, 1000, by = 5)
mean_number_of_socks <- rep(NA, length(number_of_pairs))
number_of_socks <- rep(list(rep(NA, iter)), length(number_of_pairs))
for(j in seq_along(number_of_pairs)) {
#here are my socks
socks <- rep(1:number_of_pairs[j], 2)
for(draw in 1:iter) {
#add
number_of_socks[[j]][draw] <- find_sock_pair() ##find number of socks
}
mean_number_of_socks[j] <- mean(number_of_socks[[j]])
}
# plot
qplot(number_of_pairs, mean_number_of_socks) +
geom_smooth(se = FALSE) +
labs(title = "The effect of increasing number of pairs",
x = "Number of pairs",
y = "Number of socks until I have a match")
rmarkdown::render(input = "./scr/week52_2019.Rmd",
output_format = "html_document",
output_file = "week52_2019.html",
output_dir = "./docs/")
rmarkdown::render(input = "./scr/week52_2019.Rmd",
output_format = "html_document",
output_file = "week52_2019.html",
output_dir = "./docs/")
knitr::opts_chunk$set(echo = TRUE)
